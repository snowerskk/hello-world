<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>测试</title>
    <style>
    canvas{
        border:1px solid black;
    }
    </style>
    <!-- <script src="jquery-3.2.1.min.js"></script> -->
    <script>
    window.onload=function(){
        var canvas=document.getElementById('demo');
        var ctx=canvas.getContext("2d");
        var data=[{
            "value":.2,
            "color":"red",
            "title":"应届生"
        },{
            "value":.3,
            "color":"blue",
            "title":"社会招生"
        },{
            "value":.4,
            "color":"green",
            "title":"老学员推荐"
        },{
            "value":.1,
            "color":"#ccc",
            "title":"公开课"
        }]
        //画布样式
        canvas.width=800;
        canvas.height=600;
        canvas.style.border="1px solid #000";
        //初始圆心，半径，及角度
        var x=300,y=300,r=100,temp=270;
        for(var i=0;i<data.length;i++){
            sa=temp;
            ea=sa+data[i].value*360;
            color=data[i].color;
            text=data[i].title+"("+data[i].value*100+"%)";
            //文本坐标计算
            a=x+Math.cos((sa+data[i].value*180)*Math.PI/180)*r;
            b=y+Math.sin((sa+data[i].value*180)*Math.PI/180)*r;
            DrawC(x,y,r,sa,ea,color,text,a,b);
            temp=ea;
        }
        
        function DrawC(x,y,r,sa,ea,color,text,a,b){
            ctx.beginPath();
            ctx.moveTo(x, y);
            ctx.fillStyle=color;
            ctx.arc(x, y, r, sa*Math.PI/180, ea*Math.PI/180);
            ctx.fill();
            ctx.strokeText(text, a, b);
            ctx.textAlign="center";
            ctx.closePath();
        }
    }
    </script>
</head>
<body>
<canvas id="demo">
</canvas>
</body>
</html>